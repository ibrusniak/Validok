# Validok — валидатор данных для 1С

Представляет собой единую функцию **"Валидация(Шаблон, Данные)"**.

### Термины 1С:
- *Структура*. Представляет собой коллекцию пар "ключ-значение". При этом ключ может быть только строковым и должен удовлетворять требованиям, предъявляемым к именованию переменных встроенного языка. 
К значениям структуры можно обращаться как к свойствам объекта. При этом ключ используется как имя свойства.
Структура используется обычно для хранения небольшого количества значений, каждое из которых имеет некоторое имя.
- *Соответствие*. Означает коллекцию пар "ключ-значение", где ключ и значение могут быть разных типов. Это похоже на структуру, но в отличие от нее, ключ в соответствие может быть не только строкой, но и любым другим типом данных 1С.

### Параметры функции:
- *Шаблон* — объект типа Массив, содержащий набор, состоящий из 0 и более элементов. Элементы массива — объекты типа Соответствие, представляющие собой **описания** правил валидации свойств данных. Если в массиве 0 элементов, валидация считается **пройденной** в любом случае;
- *Данные* — объект типа Соответствие, содержащий произвольные данные, подлежащие валидации.

### Возвращаемое значение:
Тип — Структура, содержит два ключа:
- *ВалидацияПройдена* — Булево, признак успешности валидации данных;
- *ОшибкиВалидации* — Массив объектов типа Соответствие. Объекты типа Соответствие состоят из ключа, **соответствующего** имени поля данных, и значения типа Строка, описывающего ошибку, относящуюся к данному полю.

### Файлы:
- **Validok.bsl** — модуль на встроенном языке 1С, реализующий функцию **"Валидация(Шаблон, Данные)"**;
- **Validok.epf** — внешняя обработка 1С, предназначенная для интерактивного тестирования валидатора.

---

### Правила написания шаблонов

#### Общие принципы
Шаблон представляет собой объект типа Массив, который можно получить путём десериализации из **соответствующего** JSON средствами платформы 1С. Поэтому далее в качестве примеров шаблонов будем использовать именно нотацию JSON, подразумевая под этим то, что для **использования** в функции **"Валидация(Шаблон, Данные)"** шаблон в виде JSON сперва нужно десериализовать в объект типа Массив. Этот Массив содержит объекты типа Соответствие, которые представляют собой **правила** валидации полей данных из объекта **Данные**.

Минимальный шаблон:
```
[]
```
При таком шаблоне - валидация будет считаться пройденой всегда.

Шаблон с одним правилом:
```
[
    {
        "Имя": "ИмяПоляВДанных",
        "Обязательность": true,
        "Тип": "Строка"
    }
]
```

Любое правило должно обязательно содержать ключи:
- *Имя* — Строка — имя ключа в объекте данных, значение которого будет проверяться;
- *Обязательность* — Булево — определяет, обязательно ли в объекте данных должно быть поле с таким ключом;
- *Тип* — строчное представление типа 1С (Строка, Число, Булево, Соответствие, Массив) — определяет, какой тип должен быть у данных поля объекта данных.
